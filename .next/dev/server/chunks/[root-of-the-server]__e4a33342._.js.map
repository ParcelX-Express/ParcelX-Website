{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/pages/api/send-welcome-email.js"],"sourcesContent":["export default async function handler(req, res) {\n  if (req.method !== 'POST') {\n    return res.status(405).json({ error: 'Method not allowed' });\n  }\n\n  const { email, firstName, lastName } = req.body;\n\n  if (!email || !firstName) {\n    return res.status(400).json({ error: 'Email and first name are required' });\n  }\n\n  const apiKey = process.env.BREVO_API_KEY;\n  const senderEmail = process.env.BREVO_SENDER;\n  const senderName = process.env.BREVO_SENDER_NAME;\n\n  if (!apiKey || !senderEmail || !senderName) {\n    console.error('Missing Brevo configuration');\n    return res.status(500).json({ error: 'Email service not configured' });\n  }\n\n  const emailHtml = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Welcome to ParcelX</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4;\">\n  <table role=\"presentation\" style=\"width: 100%; border-collapse: collapse;\">\n    <tr>\n      <td align=\"center\" style=\"padding: 40px 0;\">\n        <table role=\"presentation\" style=\"width: 600px; border-collapse: collapse; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n          <!-- Header -->\n          <tr>\n            <td style=\"background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%); padding: 40px 30px; text-align: center;\">\n              <h1 style=\"color: #ffffff; margin: 0; font-size: 32px; font-weight: bold; letter-spacing: 1px;\">ParcelX</h1>\n              <p style=\"color: #e2e8f0; margin: 10px 0 0 0; font-size: 14px;\">Global Shipping & Delivery Solutions</p>\n            </td>\n          </tr>\n          \n          <!-- Welcome Message -->\n          <tr>\n            <td style=\"padding: 50px 40px 30px 40px;\">\n              <h2 style=\"color: #1e3a5f; margin: 0 0 20px 0; font-size: 28px;\">Welcome aboard, ${firstName}! üéâ</h2>\n              <p style=\"color: #4a5568; font-size: 16px; line-height: 1.8; margin: 0 0 25px 0;\">\n                Thank you for creating your ParcelX account. We're thrilled to have you join our global network of shippers and receivers.\n              </p>\n              <p style=\"color: #4a5568; font-size: 16px; line-height: 1.8; margin: 0 0 25px 0;\">\n                Your account is now active and ready to use. You can start shipping packages worldwide with competitive rates and real-time tracking.\n              </p>\n            </td>\n          </tr>\n          \n          <!-- Features -->\n          <tr>\n            <td style=\"padding: 0 40px 40px 40px;\">\n              <table role=\"presentation\" style=\"width: 100%; border-collapse: collapse;\">\n                <tr>\n                  <td style=\"padding: 20px; background-color: #f7fafc; border-radius: 8px; margin-bottom: 15px;\">\n                    <table role=\"presentation\" style=\"width: 100%;\">\n                      <tr>\n                        <td style=\"width: 50px; vertical-align: top;\">\n                          <div style=\"width: 40px; height: 40px; background-color: #ed8936; border-radius: 50%; text-align: center; line-height: 40px; font-size: 18px;\">üì¶</div>\n                        </td>\n                        <td style=\"vertical-align: top; padding-left: 15px;\">\n                          <h3 style=\"color: #1e3a5f; margin: 0 0 5px 0; font-size: 16px;\">Ship Anywhere</h3>\n                          <p style=\"color: #718096; margin: 0; font-size: 14px;\">Send packages to 220+ countries and territories</p>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                <tr><td style=\"height: 15px;\"></td></tr>\n                <tr>\n                  <td style=\"padding: 20px; background-color: #f7fafc; border-radius: 8px;\">\n                    <table role=\"presentation\" style=\"width: 100%;\">\n                      <tr>\n                        <td style=\"width: 50px; vertical-align: top;\">\n                          <div style=\"width: 40px; height: 40px; background-color: #ed8936; border-radius: 50%; text-align: center; line-height: 40px; font-size: 18px;\">üîç</div>\n                        </td>\n                        <td style=\"vertical-align: top; padding-left: 15px;\">\n                          <h3 style=\"color: #1e3a5f; margin: 0 0 5px 0; font-size: 16px;\">Real-Time Tracking</h3>\n                          <p style=\"color: #718096; margin: 0; font-size: 14px;\">Track your shipments 24/7 with live updates</p>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                <tr><td style=\"height: 15px;\"></td></tr>\n                <tr>\n                  <td style=\"padding: 20px; background-color: #f7fafc; border-radius: 8px;\">\n                    <table role=\"presentation\" style=\"width: 100%;\">\n                      <tr>\n                        <td style=\"width: 50px; vertical-align: top;\">\n                          <div style=\"width: 40px; height: 40px; background-color: #ed8936; border-radius: 50%; text-align: center; line-height: 40px; font-size: 18px;\">üí∞</div>\n                        </td>\n                        <td style=\"vertical-align: top; padding-left: 15px;\">\n                          <h3 style=\"color: #1e3a5f; margin: 0 0 5px 0; font-size: 16px;\">Competitive Rates</h3>\n                          <p style=\"color: #718096; margin: 0; font-size: 14px;\">Get the best shipping rates with no hidden fees</p>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          \n          <!-- CTA Button -->\n          <tr>\n            <td style=\"padding: 0 40px 50px 40px; text-align: center;\">\n              <a href=\"https://parcelx.com/dashboard\" style=\"display: inline-block; background-color: #ed8936; color: #ffffff; text-decoration: none; padding: 16px 40px; border-radius: 8px; font-weight: bold; font-size: 16px;\">Start Shipping Now</a>\n            </td>\n          </tr>\n          \n          <!-- Account Details -->\n          <tr>\n            <td style=\"padding: 30px 40px; background-color: #f7fafc; border-top: 1px solid #e2e8f0;\">\n              <h3 style=\"color: #1e3a5f; margin: 0 0 15px 0; font-size: 16px;\">Your Account Details</h3>\n              <table role=\"presentation\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"color: #718096; font-size: 14px; padding: 5px 0;\">Account Email:</td>\n                  <td style=\"color: #1e3a5f; font-size: 14px; padding: 5px 0; text-align: right; font-weight: 600;\">${email}</td>\n                </tr>\n                <tr>\n                  <td style=\"color: #718096; font-size: 14px; padding: 5px 0;\">Account Name:</td>\n                  <td style=\"color: #1e3a5f; font-size: 14px; padding: 5px 0; text-align: right; font-weight: 600;\">${firstName} ${lastName}</td>\n                </tr>\n                <tr>\n                  <td style=\"color: #718096; font-size: 14px; padding: 5px 0;\">Member Since:</td>\n                  <td style=\"color: #1e3a5f; font-size: 14px; padding: 5px 0; text-align: right; font-weight: 600;\">${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"background-color: #1e3a5f; padding: 30px 40px; text-align: center;\">\n              <p style=\"color: #a0aec0; font-size: 14px; margin: 0 0 15px 0;\">\n                Need help? Contact our support team at <a href=\"mailto:support@parcelx.com\" style=\"color: #ed8936; text-decoration: none;\">support@parcelx.com</a>\n              </p>\n              <p style=\"color: #718096; font-size: 12px; margin: 0;\">\n                ¬© ${new Date().getFullYear()} ParcelX. All rights reserved.<br>\n                This email was sent to ${email} because you created a ParcelX account.\n              </p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n  `;\n\n  try {\n    const response = await fetch('https://api.brevo.com/v3/smtp/email', {\n      method: 'POST',\n      headers: {\n        'accept': 'application/json',\n        'api-key': apiKey,\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        sender: {\n          name: senderName,\n          email: senderEmail,\n        },\n        to: [\n          {\n            email: email,\n            name: `${firstName} ${lastName}`,\n          },\n        ],\n        subject: `Welcome to ParcelX, ${firstName}! Your Account is Ready üöÄ`,\n        htmlContent: emailHtml,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      console.error('Brevo API error:', data);\n      return res.status(response.status).json({ error: data.message || 'Failed to send email' });\n    }\n\n    return res.status(200).json({ success: true, messageId: data.messageId });\n  } catch (error) {\n    console.error('Email sending error:', error);\n    return res.status(500).json({ error: 'Failed to send email' });\n  }\n}\n"],"names":[],"mappings":";;;;AAAe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;IAE/C,IAAI,CAAC,SAAS,CAAC,WAAW;QACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAoC;IAC3E;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,aAAa;IACxC,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;IAC5C,MAAM,aAAa,QAAQ,GAAG,CAAC,iBAAiB;IAEhD,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,YAAY;QAC1C,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA+B;IACtE;IAEA,MAAM,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;+FAwB0E,EAAE,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oHA+ES,EAAE,MAAM;;;;oHAIR,EAAE,UAAU,CAAC,EAAE,SAAS;;;;oHAIxB,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;QAAE,MAAM;QAAW,OAAO;QAAQ,KAAK;IAAU,GAAG;;;;;;;;;;;;;kBAa/L,EAAE,IAAI,OAAO,WAAW,GAAG;uCACN,EAAE,MAAM;;;;;;;;;;EAU7C,CAAC;IAED,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,uCAAuC;YAClE,QAAQ;YACR,SAAS;gBACP,UAAU;gBACV,WAAW;gBACX,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,QAAQ;oBACN,MAAM;oBACN,OAAO;gBACT;gBACA,IAAI;oBACF;wBACE,OAAO;wBACP,MAAM,GAAG,UAAU,CAAC,EAAE,UAAU;oBAClC;iBACD;gBACD,SAAS,CAAC,oBAAoB,EAAE,UAAU,0BAA0B,CAAC;gBACrE,aAAa;YACf;QACF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,oBAAoB;YAClC,OAAO,IAAI,MAAM,CAAC,SAAS,MAAM,EAAE,IAAI,CAAC;gBAAE,OAAO,KAAK,OAAO,IAAI;YAAuB;QAC1F;QAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;YAAM,WAAW,KAAK,SAAS;QAAC;IACzE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAuB;IAC9D;AACF"}}]
}